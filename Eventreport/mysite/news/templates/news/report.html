{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/apple-icon.png' %}">
    <link rel="icon" type="image/png" href="{% static 'assets/img/icon.png' %}">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Event-Hub</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script type='text/javascript' src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
    <!-- CSS Files -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/now-ui-dashboard.css' %}" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="{% static 'assets/demo/demo.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/main.css' %}" rel="stylesheet" />
</head>

<body class="">
    <div class="wrapper ">
        <div class="sidebar" data-color="orange">
            <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
    -->
            <div class="logo">
                <a href="http://www.creative-tim.com" class="simple-text logo-mini">
                    <i class="far fa-clock"></i>
                </a>
                <a href="http://www.creative-tim.com" class="simple-text logo-normal">
                    EVENT-HUB REPORT
                </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li>
                        <a href="{% url 'news:report' %}">
                            <i class="now-ui-icons location_map-big"></i>
                            <p>REPORT</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-panel">
            <!--
            <nav class="navbar navbar-expand-lg navbar-transparent  navbar-absolute bg-primary fixed-top">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                        <div class="navbar-toggle">
                            <button type="button" class="navbar-toggler">
                                <span class="navbar-toggler-bar bar1"></span>
                                <span class="navbar-toggler-bar bar2"></span>
                                <span class="navbar-toggler-bar bar3"></span>
                            </button>
                        </div>
                        <a class="navbar-brand" href="#pablo">Dashboard</a>
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">
                        <form>
                            <div class="input-group no-border">
                                <input type="text" value="" class="form-control" placeholder="Search...">
                                <span class="input-group-addon">
                                    <i class="now-ui-icons ui-1_zoom-bold"></i>
                                </span>
                            </div>
                        </form>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <i class="now-ui-icons media-2_sound-wave"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Stats</span>
                                    </p>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="now-ui-icons location_world"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Some Actions</span>
                                    </p>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <i class="now-ui-icons users_single-02"></i>
                                    <p>
                                        <span class="d-lg-none d-md-block">Account</span>
                                    </p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            -->
            <div style="height:62px; background-color:#ffff;">

            </div>
            <section class="paralax-mfs footer-paralaxs bg-image route" >

              <div class="container">
                <div class="row">
                  <div class="col-sm-20">
                    <div class="contact-mfs">
                      <div id="contact" class="box-shadow-fulls">
                        <div class="row">
                          <div class="col-md-4">
                            <div class="title-box-2">
                              <h5 class="title-left">
                                Select Loacation As
                              </h5>
                            </div>
                            <div>
                              <form method="POST" role="form" class="php-email-form">
                                {% csrf_token %}
                                <div class="row">
                                  <div class="col-md-12 mb-3">
                                    <div class="form-group">
                                      <input type="text" name="country" class="form-control" id="country" placeholder="country" data-rule="minlen:1" data-msg="Please enter at least 4 chars" />
                                      <div class="validate"></div>
                                    </div>
                                  </div>
                                  <div class="col-md-12 mb-3">
                                    <div class="form-group">
                                      <input type="text" class="form-control" name="place" id="place" placeholder="place" data-rule="minlen:1" data-msg="Please enter a valid email" />
                                      <div class="validate"></div>
                                    </div>
                                  </div>
                                  <div class="col-md-12 mb-3">
                                    <div class="form-group">
                                      <input type="text" class="form-control" name="lat" id="lat" placeholder="lat" data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject" />
                                      <div class="validate"></div>
                                    </div>
                                  </div>
                                  <div class="col-md-12">
                                    <div class="form-group">
                                        <input type="text" class="form-control" name="lon" id="lon" placeholder="lon" data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject" />
                                      <div class="validate"></div>
                                    </div>
                                  </div>
                                  <div class="col-md-12 text-center mb-3">
                                    <div class="loading">Loading</div>
                                    <div class="error-message"></div>
                                    <div class="sent-message">Your message has been sent. Thank you!</div>
                                  </div>
                                  <div class="col-md-12 text-center" style="padding-bottom:.5rem;">
                                    <button type="submit" class="button button-b button-rouded">submit</button>
                                  </div>
                                </div>
                              </form>
                
                            </div>
                          </div>
                          <div class="col-md-8">
                            <div class="inner" id="mapid" style="height:100%;width: 100%; min-height:442.59px">
                    				</div>
                            <style type="text/css">
                              #mapid {

                                height: 100%;
                              width: 80%;
                            align-items: center;}
                            </style>
                            <script type="text/javascript">
                              var mymap = L.map('mapid').setView([11.072035, 76.074005], 2);


                              L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}',
                              { attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                            maxZoom: 18,
                            minZoom: 2,
                            id: 'mapbox/streets-v11',
                            tileSize: 512,
                            zoomOffset: -1,
                            accessToken: 'sk.eyJ1Ijoic2hpeWFzMTIzIiwiYSI6ImNraHA3ajk5eTE2bXIyemsxcTJ4eHoxNGUifQ.gyIx9BSa7heVTUH3HcGc2A'
                        }).addTo(mymap);


                        var marker = L.marker([11.072035, 76.074005]).addTo(mymap);



                        var circle = L.circle([11.072035, 76.074005], {
                            color: 'red',
                            fillColor: '#f03',
                            fillOpacity: 0.5,
                            radius: 500
                        }).addTo(mymap);


                        var polygon = L.polygon([
                            [51.509, -0.08],
                            [51.503, -0.06],
                            [51.51, -0.047]
                        ]).addTo(mymap);


                        marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
                        circle.bindPopup("I am a circle.");
                        polygon.bindPopup("I am a polygon.");


                        var popup = L.popup()
                            .setLatLng([11.072035, 76.074005])
                            .setContent("I am a standalone popup.")
                            .openOn(mymap);


                            function onMapClick(e) {
                            alert("You clicked the map at " + e.latlng);
                        }

                        mymap.on('click', onMapClick);


                        var popup = L.popup();

                        function onMapClick(e) {
                            popup
                                .setLatLng(e.latlng)
                                .setContent("You clicked the map at " + e.latlng.toString())
                                .openOn(mymap);

                                var x=e.latlng.toString();
                                var regex=/[+-]?\d+(\.\d+)?/g;
                                var coordinates=x.match(regex).map(function(v){return parseFloat(v);});
                                //var arr=x.split("(");
                                //var ary=arr[1].split(")");
                                //ary=ary[0].split(",");
                                //var lat=ary[0];
                                //ary=ary[1].split(" ");
                                //var lon=ary[1];
                                //document.getElementById('id2').value=lon;
 
                      //var y="https://nominatim.openstreetmap.org/reverse?format=jsonv2&"
                                $(document).ready(function(){
                                  $.getJSON("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+coordinates[0]+"&lon="+coordinates[1], function(result){
                                    if(result.address.country!=null)
                                    {
                                      document.getElementById('country').value=result.address.country;
                                      document.getElementById('place').value=result.address.state;
                                      document.getElementById('lat').value=coordinates[0];
                                      document.getElementById('lon').value=coordinates[1];
                                    }
                                  });
                                });

                              }

                              mymap.on('click', onMapClick);

                              </script>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start active">
                      <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">News Report</h5>
                      </div>
                    </a>
                   
                    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
                        <p class="mb-1">{{file_content}}</p>
                    </a>
                    
                </div>
              </div>
            </section><!-- End Contact Section -->


            
        </div>
    </div>
</body>
<!--   Core JS Files   -->
<script src="{% static 'assets/js/core/jquery.min.js' %}"></script>
<script src="{% static 'assets/js/core/popper.min.js' %}"></script>
<script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!-- Chart JS -->
<script src="{% static 'assets/js/plugins/chartjs.min.js' %}"></script>
<!--  Notifications Plugin    -->
<script src="{% static 'assets/js/plugins/bootstrap-notify.js' %}"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="{% static 'assets/js/now-ui-dashboard.js' %}"></script>
<!-- Now Ui Dashboard DEMO methods, don't include it in your project! -->
<script src="{% static 'assets/demo/demo.js' %}"></script>
<script>
    $(document).ready(function() {
        // Javascript method's body can be found in assets/js/demos.js
        demo.initDashboardPageCharts();
    });
</script>

</html>